<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head lang="en">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Galaxy帮助文档_Galaxy在线文档_Galaxy使用说明</title>
  <META NAME="Author" CONTENT="Javaosc开源社区团队">
  <meta name="keywords" content="Galaxy帮助文档,Galaxy在线文档,Galaxy使用说明,Galaxy框架,Galaxy开源框架,Java Web开源框架,J2EE框架" />
  <meta name="description" content="Galaxy在线文档，介绍基本使用和注意事项，使更多开发者认识和了解Galaxy框架." />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <link rel="alternate icon" type="image/png" href="image/favicon.png">
  <link rel="stylesheet" href="css/amazeui.min.css"/>
  <style>
    body{
        background: url('image/bg.png') left top #f5f5f5;
    }
    @media only screen and (min-width: 641px) {
      .am-offcanvas {
        display: block;
        position: static;
        background: none;
      }
      .am-offcanvas-bar {
        position: static;
        width: auto;
        background: none;
        -webkit-transform: translate3d(0, 0, 0);
        -ms-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
      .am-offcanvas-bar:after {
        content: none;
      }
    }
    @media only screen and (max-width: 640px) {
      .am-offcanvas-bar .am-nav>li>a {
        color:#ccc;
        border-radius: 0;
        border-top: 1px solid rgba(0,0,0,.3);
        box-shadow: inset 0 1px 0 rgba(255,255,255,.05)
      }
      .am-offcanvas-bar .am-nav>li>a:hover {
        background: #404040;
        color: #fff
      }
      .am-offcanvas-bar .am-nav>li.am-nav-header {
        color: #777;
        background: #404040;
        box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
        text-shadow: 0 1px 0 rgba(0,0,0,.5);
        border-top: 1px solid rgba(0,0,0,.3);
        font-weight: 400;
        font-size: 75%
      }
      .am-offcanvas-bar .am-nav>li.am-active>a {
        background: #1a1a1a;
        color: #fff;
        box-shadow: inset 0 1px 3px rgba(0,0,0,.3)
      }
      .am-offcanvas-bar .am-nav>li+li {
        margin-top: 0;
      }
    }
    .my-head {
      margin-top: 40px;
      text-align: center;
    }
    .my-button {
      position: fixed;
      top: 0;
      right: 0;
      border-radius: 0;
    }
    .my-sidebar {
      padding-right: 0;
      border-right: 1px solid #eeeeee;
    }
    .my-footer {
      border-top: 1px solid #eeeeee;
      padding: 10px 0;
      margin-top: 10px;
      text-align: center;
    }

    .am-topbar-nav>li.am-active>a, .am-topbar-nav>li.am-active>a:focus, .am-topbar-nav>li.am-active>a:hover {
      color: #4CAD84!important;
      background-color: #0e90d2;
      cursor: default;
    }
    .am-nav>li.am-active>a, .am-nav>li.am-active>a:focus, .am-nav>li.am-active>a:hover {
        color: #fff;
        background-color: #f8f8f8;
        cursor: default;
    }
    .am-topbar-nav>li.am-active>a:after {
        border-bottom-color: #4CAD84!important;
    }

    .am-btn-secondary {
        color: #fff;
        background-color: #4CAD84;
        border-color: #4CAD84;
    }
    .am-btn-secondary:focus, .am-btn-secondary:hover {
        background-color: #4CAD84;
        color: #fff;
    }

    .am-u-md-10 {
      height:auto;
      min-height: 800px;
    }

    .am-g-fixed{margin: 67px auto;padding: 35px 0;background: #fff;}  

    .footer p {
      color: #7f8c8d;
      margin: 0;
      padding: 15px 0;
      text-align: center;
      background: #2d3e50;
    }
    .scrollspy-nav {
	    z-index: 100;
    }
    .doc-content {
    font-size: 1.4rem;
	}
	pre{
		background-color: none;
		border:0;
    	border-radius: 0;
	}
  </style>
</head>
<body>
<header class="am-topbar am-topbar-fixed-top">
  <div class="am-container">
    <h1 class="am-topbar-brand">
      <a href="index.html">Galaxy 开源框架 </a>
    </h1>
    <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-default am-btn-secondary am-show-sm-only"
            data-am-collapse="{target: '#collapse-head'}"><span class="am-sr-only">导航切换</span> <span
        class="am-icon-bars"></span></button>
    <div class="am-collapse am-topbar-collapse" id="collapse-head">
      <ul class="am-nav am-nav-pills am-topbar-nav">
        <li><a href="index.html">首页</a></li>
        <li class="am-active"><a href="document.html">在线文档</a></li>
        <li><a data-am-modal="{target: '#community-modal'}">社区讨论</a></li>
        <li><a href="contribute.html">贡献列表</a></li>
        <li><a href="update.html">更新日志</a></li>
        <li class="am-dropdown" data-am-dropdown>
          <a class="am-dropdown-toggle" data-am-dropdown-toggle href="javascript:;">
            捐赠<span class="am-icon-caret-down"></span>
          </a>
          <ul class="am-dropdown-content">
            <li><img src="image/wechatpay.png" style="width: 180px;height: 180px;" /></li>
            <li class="am-dropdown-header" style="text-align: center;">微信扫一扫</li>
            <hr style="margin: 0;">
            <li><img src="image/alipay.png" style="width: 180px;height: 180px;" /></li>
            <li class="am-dropdown-header" style="text-align: center;">支付宝扫一扫</li>
            <hr style="margin: 0;">
            <li class="am-dropdown-header" style="text-align: center;color: #888;">您的捐赠信息将更新到“贡献列表”，感谢支持！</li>         
           </ul>
         </li>
      </ul>
    </div>
  </div>
</header>
</header>
<div class="am-g am-g-fixed">
  <div class="am-u-md-10 am-u-md-push-2">
    <div class="am-g">
      <div class="am-u-sm-11 am-u-sm-centered">
        <div class="am-cf am-article">
          <div class="doc-content">
	           <h2 id="inst" name="inst">简介</h2>
			   <p class="am-article-lead">Galaxy是一款Java web开发框架，集轻量级、高性能、创新于一体，为Javaosc社区提供核心支持。通过最佳项目实践，在保证性能和稳定的同时，引入优秀的第三方插件，让开发者能够更加简洁和高效的使用Java语言来开发。接下来就让我们一起来学习下Galaxy框架吧~</p>
			   <h3>基础环境</h3>
			   <p>在框架的开发中我们逐渐发现了Jdk1.7的一些进步和改善以及Jdk1.6的一些不足之处，所以本框架<span class="am-badge am-badge-danger">基于Jdk1.7和Tomcat7.0环境</span>而开发。如果您是将要建立的工程或项目，我们欢迎您加入到Galaxy的使用中；如果您是老项目的迁移，我们建议您评估当前迁移的工作量和人力成本，自我做下决定。</p>
         <hr>
			   <h2 id="ref" name="ref">依赖关系</h2>
			   <p class="am-text-danger"><b>核心依赖：</b><br><br>slf4j-api.jar（通用日志接口），属于强依赖，必不可少。（可以用此接口引入logback或log4j实现日志功能）</p>
			   <p><b>选择性场景依赖：<small class="am-text-success">（看到下面的介绍不要恐惧，以下是全场景的可选依赖，并且类包小到没有朋友）</small></b><br><br>1. Dao层不使用接口类，仅当作编写Sql的模板用，则引用Cglib-nodep动态代理类包)；<br>2. 页面需要返回Json数据，则需引入Google的Gson类包；<br>3. 实现上传功能，则需要引入Tim O'Reilly的Cos类包；<br>4. 实现数据库连接池，则需要引入HikariCP或C3p0类包；<br>5. 页面需要使用模板引擎，则需要引入Dubbo作者的Httl类包；</p>
	       <h3>依赖预览：<small class="am-text-secondary"> 必须依赖：212.1 KB，可选依赖：1412.27 KB，版本推荐实时维护</small></h3>
	       <ul class="am-list am-list-static am-list-border plugin">
	          <li><span class="am-badge"><a name="galaxy-0.9.5.RELEASE.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-danger">必须</span>galaxy-0.9.5.RELEASE.jar - Galaxy框架 - 172KB</li>
			  		<li><span class="am-badge"><a name="slf4j-api-1.7.22.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-danger">必须</span>slf4j-api-1.7.22.jar - 通用日志接口 - 40.1KB -  <span class="am-text-primary">建议使用logback实现日志，原log4j作者新作 *</span></li>
			  		<li><span class="am-badge"><a name="cglib-nodep-3.2.4.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-success">可选</span>cglib-nodep-3.2.4.jar - 动态代理，Jdk代理的增强实现 - 343KB</li>
			  		<li><span class="am-badge"><a name="gson-2.8.0.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-success">可选</span>gson-2.8.0.jar - Json处理插件 - 143KB</li>
			  		<li><span class="am-badge"><a name="cos-05Nov2002.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-success">可选</span>cos-05Nov2002.jar - 上传插件 - 55KB</li>
			  		<li><span class="am-badge"><a name="HikariCP-2.4.7.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-success">可选</span>HikariCP-2.4.7.jar - 数据库连接池 - 133.17KB -  <span class="am-text-primary">推荐使用，字节码实现，新一代连接池 *</span></li>
			  		<li><span class="am-badge"><a name="c3p0-0.9.2.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-success">可选</span>c3p0-0.9.2.jar - 数据库连接池 - 414KB</li>
			  		<li><span class="am-badge"><a name="httl-1.0.12.jar" style="color: #fff;">立即下载</a></span><span class="am-badge am-badge-success">可选</span>httl-1.0.12.jar - 模板引擎 - 526KB</li>
			   </ul>
         <hr>
			   <h2 id="new" name="new">启动尝鲜</h2>
			   <p>1. 新建web项目并将galaxy-x.x.x.RELEASE.jar和slf4j-api-1.7.22.jar添加到lib目录下 <span class="am-badge am-badge-danger">目前maven仓库还未开放</span></p>
			   <p>2. 为该项目的WEB-INF目录下，添加如下web.xml配置并新建index.jsp,并在该页面的body里写入Hello!</span></p>
			   <pre class="am-pre-scrollable">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:jsp="http://java.sun.com/xml/ns/javaee/jsp" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"&gt;<br>
&lt;display-name&gt;galaxy framework example&lt;/display-name&gt;<br>
&lt;!-- 配置框架监听 --&gt;
&lt;listener&gt;
    &lt;listener-class&gt;org.javaosc.galaxy.web.ContextListener&lt;/listener-class&gt;
&lt;/listener&gt;<br>
&lt;!-- 监听下装载核心配置 --&gt;
&lt;context-param&gt;
    &lt;param-name&gt;>galaxyConfig&lt;/param-name&gt;
    &lt;param-value&gt;galaxy.properties&lt;/param-value&gt;
&lt;/context-param&gt;<br>
&lt;!-- 静态文件放行 --&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;default&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.gif&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;!-- 配置核心转发 --&gt;
&lt;servlet&gt;
    &lt;servlet-name&gt;galaxy&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.javaosc.galaxy.web.ContextServlet&lt;/servlet-class&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;galaxy&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
  
&lt;!-- 配置启动欢迎页 --&gt;
&lt;welcome-file-list&gt;
    &lt;welcome-file&gt;/WEB-INF/index.jsp&lt;/welcome-file&gt;
&lt;/welcome-file-list&gt;
&lt;/web-app&gt;
</pre>

<pre>
&lt;body&gt;
Hello!
&lt;/body&gt;
</pre>
<p>3. 为该项目的src目录添加galaxy.properties核心配置</p>
			   <pre class="am-pre-scrollable">
#============== galaxy configuration setting ==============
galaxy.context.encode = UTF-8  //设置框架的上下文编码，默认UTF-8
galaxy.request.character.encode = true //设置请求编码 ，默认false
galaxy.response.character.encode = true //设置响应编码，默认false

galaxy.console.started.status = true //控制台是否输出框架欢迎提示，默认true

galaxy.datasource.open.status = false //开启数据源初始化，默认true
			   </pre>
<p>4. 将项目工程部署到Tomcat7.0下启动，控制台输出框架欢迎提示并且新建的index.jsp成功显示Hello!。</p>
<hr>
<h2 id="action" name="action">转发控制器</h2>
<blockquote>
  <p>action的method方法的接收参数支持Java基础类型、基础包装类型、自定义oo对象、HttpServletRequest和HttpServletResponse，后期会支持Json数据的接收，目前上传可以根据HttpServletRequest和框架工具类实现，还在考虑是否包装对象参数来实现，这样势必会增加学习曲线，后期会根据大家的建议来考虑是否把cos插件纳入到框架中成为Galaxy的一部分，cos插件的作者已经不维护了，纳入进来后我们会进行二次重构，请知悉！</p>
</blockquote>
<h3>1) 网页发送请求到自定义url路径，并成功返回</h3>

<p>1. 为galaxy.properties添加页面路径和扫描类包路径配置</p>
<pre class="am-pre-scrollable">
galaxy.view.prefix = /WEB-INF //请求返回的页面根目录，默认/WEB-INF
galaxy.view.suffix = .jsp //请求返回的页面的后缀格式,默认.jsp

galaxy.scaner.annotation.package = com.javaosc //要扫描的类包根目录或指定目录</pre>

<p>2. 在src目录下新建包：com.javaosc.user.action，并新建类：UserAction</p>

<p>3. 为UserAction类上添加@Mapping("/user")注解；新建返回类型为String的方法，并在方法上添加注解@Mapping("/hello")，并在方法里添加返回到页面的数据：world，并将方法返回到index.jsp</p>
<pre>
package com.javaosc.user.action;

import org.javaosc.galaxy.annotation.Mapping;
import org.javaosc.galaxy.web.assist.ContextHandler;

@Mapping("/user")
public class UserAction {
	
	@Mapping("/hello")
	public String getUserList(){
	   ContextHandler.putAttr("h","world");
	   return "index";
	}
}
</pre>
<p>4. 编辑在WEB-INF目录下的index.jsp，在Hello后面添加${h}</p>
<pre>
&lt;body&gt;
Hello,${h }!
&lt;/body&gt;
</pre>
<p>5. 在浏览器输入localhost/user/hello 回车发送请求，成功显示Hello，world！即可</p>

<h3>2) 让action的方法具备返回json的能力</h3>
<p>1. 改造之前的方法，加入传参Byte type，并将gson-2.8.0.jar添加到lib下，返回json数据</p>
<pre class="am-pre-scrollable">
@Mapping("/hello")
public String getUserList(Byte type){
	if(type==null || type==0){
		ContextHandler.putAttr("h","world");
		return "index";
	}else{
		ContextHandler.putJson("h","world");
		return null;
	}
}
</pre>
<p>2. 在地址栏输入localhost/user/hello?type=1回显json格式数据即成功，不输入或者type=0返回到index.jsp数据</p>

<h3>3) 让action的方法返回到页面多个参数或者输出oo对象</h3>
<p>1. 在src目录下新建包：com.javaosc.user.model，并且新建类：User，并在类上注入@Bean注解</p>
<pre class="am-pre-scrollable">
package com.javaosc.user.model;

import org.javaosc.galaxy.annotation.Bean;

@Bean
public class User {
  
  private Integer userId;
  private String userName;
  private Integer age;
  private Byte type;
  
  public Integer getUserId() {
    return userId;
  }
  public void setUserId(Integer userId) {
    this.userId = userId;
  }
  public String getUserName() {
    return userName;
  }
  public void setUserName(String userName) {
    this.userName = userName;
  }
  public Integer getAge() {
    return age;
  }
  public void setAge(Integer age) {
    this.age = age;
  }
  public Byte getType() {
    return type;
  }
  public void setType(Byte type) {
    this.type = type;
  }
  
}
</pre>
<p>2. 改造之前的方法参数为User user,并用putAttr多个参数到页面，将User对象包含在内返回，并对User对象里的age属性设置18</p>
<pre>
@Mapping("/hello")
public String getUserList(User user){
	user = user==null?new User():user;
	user.setAge(18);
	if(user.getType()==null || user.getType()==0){	
		ContextHandler.putAttr("h","world","name","dylan","user",user);
		return "index";
	}else{
		ContextHandler.putJson("h","world");
		return null;
	}
}
</pre>
<p>3. 在index.jsp获取name的值，并且从User对象里获取到age属性显示</p>
<pre>
<body>
Hello,${h }! my name is ${name },${user.age } year old!
</body>
</pre>
<p>4. 在地址栏输入localhost/user/hello 或者后缀type=0，回显index.jsp数据即可</p>
<h3>4) 让action的方法返回json的User对象</h3>
<p>1. 改造else的putJson如下，返回User对象</p>
<pre>ContextHandler.putJson(user);</pre>
<p>2. 在地址栏输入localhost/user/hello?type=1，返回User对象的json数据即可</p>

<h3>5) 让action的方法返回json自定义属性的对象</h3>
<p>1. 改造else的putJson如下，返回多个自定义属性</p>
<pre>ContextHandler.putJson("h","world","name","dylan","user",user);</pre>
<p>2. 在地址栏输入localhost/user/hello?type=1，返回json数据中包含user对象即可</p>

<h3>6) 让action的方法可以拥有动态占位url</h3>
<p>1. 改造方法上的@Mapping注解的设置为{type}</p>
<pre>@Mapping("/{type}")
public String getUserList(User user){
    user = user==null?new User():user;
    user.setAge(18);
    if(user.getType()==null || user.getType()==0){
      ContextHandler.putAttr("h","world","name","dylan","user",user);
      return "index";
    }else{
      ContextHandler.putJson(user);
      return null;
    }
}</pre>
<p>2. 在地址栏输入localhost/user/0或者localhost/user/1，分别页面对象和json数据即可</p>

<h3>7) action默认是单例多线程的，让其成为多例模式，在类上添加@Prototype注解</h3>
<pre>@Prototype
@Mapping("/user")
public class UserAction {
    ...
}</pre>
<h3>8) 通过url请求直接返回到页面，不经过action控制器的处理（可以无限多个）</h3>
<p>1. 为galaxy.properties添加页面url跳转，配置必须以galaxy.url.为开头。其中第二个等号的左边为浏览器url；右边为以galaxy.view.prefix配置为基础的相对页面目录（格式：galaxy.url.x.x...= /浏览器url=/相对页面目录）</p>
<pre>galaxy.url.user.detail = /user/detail=/detail</pre>
<p>2. 在WEB-INF根目录下，新建detail.jsp并在body标签里填写Hello，world！</p>
<pre>&lt;body&gt;
Hello，World！
&lt;/body&gt;</pre>
<p>3. 在地址栏输入localhost/user/detail，页面直接成功跳转到detail.jsp并显示Hello，world！</p>
<hr>
<h2 id="action" name="action">Sql模板</h2>
<blockquote>
  <p>目前jdbcHanler支持单列单行，单列多行，对象(多列)单行，对象(多列)多行，分页多行查询；支持单条和批量增、删、改，能够支撑几乎所有的场景，除级联一对多个附表查询以外，对数据库的列我们内置做了预缓存，数据库表的列多个字母可以用英文下划线隔开，ps：user_name，对其他特殊字符我们无法完成表列对oo对象的映射，请知悉！</p>
</blockquote>
<h3>1) 为action转发控制器添加数据源访问，完成dao模板注入到action控制器(下个模块会加入service业务逻辑处理)</h3>
<p>1. 为galaxy.properties添加数据源（目前支持HikariCP或C3P0连接池）配置并开启访问数据源开关，我们选择HikariCP来完成演示</p>
<pre>
galaxy.datasource.open.status = true //数据源开关，默认true，修改为true或者将此配置项移除

# ====== HikariCP connect setting ======

db.driverClassName = com.mysql.jdbc.Driver //数据库驱动
db.jdbcUrl = jdbc:mysql://localhost:3306/javaosc?useUnicode=true&amp;characterEncoding=UTF-8 //数据库链接及库名
db.username = root //数据库的账号
db.password = 123 //数据库的密码

pool.dataSource = com.zaxxer.hikari.HikariDataSource //数据连接池
pool.maxPoolSize = 100
pool.maxIdleTime = 300000
pool.maxLifetime = 900000
pool.connectionTimeout = 30000
pool.validationTimeout = 5000

pool.cachePrepStmts=true
pool.prepStmtCacheSize=250
pool.prepStmtCacheSqlLimit=2048
</pre>
<p>2. 将cglib-nodep-3.2.4.jar,HikariCP-2.4.7.jar连接池和mysql-connector-java-5.1.38.jar数据库驱动添加到项目lib目录，并在mysql中新建javaosc库和user表，添加user_id,user_name,age,type列，完成和之前控制器中User对象的列对应关系</p>
<p>3. 在src目录下新建包：com.javaosc.user.dao，并且新建dao模板类：UserDao，在该类上添加@Dao注解，并且将jdbcTemplate声明为全局类变量，为此全局变量添加@Autowired，达到注入作用</p>
<pre>
package com.javaosc.user.dao;

import org.javaosc.galaxy.annotation.Autowired;
import org.javaosc.galaxy.annotation.Dao;
import org.javaosc.galaxy.jdbc.JdbcTemplate;

@Dao
public class UserDao{
  
  @Autowired
  private JdbcTemplate jdbcTemplate;
  

}
</pre>

<p>4. 在UserDao类中新建方法User getUser(User user),并在此类中新建方法，编写对象单行查询sql</p>
<pre>
package com.javaosc.user.dao;

import org.javaosc.galaxy.annotation.Autowired;
import org.javaosc.galaxy.annotation.Dao;
import org.javaosc.galaxy.jdbc.JdbcTemplate;

import com.javaosc.user.model.User;

@Dao
public class UserDao{
  
  @Autowired
  private JdbcTemplate jdbcTemplate;

  public User getUser(User user) {
    String sql = "select * from user where user_id = ?";
    return jdbcTemplate.getForObject(sql, User.class, user.getUserId());
  }
  
}
</pre>
<p>5. 将UserDao类声明为UserAction的全局变量类，并将其用@Autowired注解注入，在UserAction类中新建geyUserDetail(Integer userId)方法并调用dao模板的getUser(User user)方法，完成控制器访问数据源</p>
<pre>
package com.javaosc.user.action;

import org.javaosc.galaxy.annotation.Autowired;
import org.javaosc.galaxy.annotation.Mapping;
import org.javaosc.galaxy.web.assist.ContextHandler;

import com.javaosc.user.dao.UserDao;
import com.javaosc.user.model.User;

@Mapping("/user")
public class UserAction {
  
  @Autowired
  private UserDao userDao;
  
  @Mapping("/get")
  public String getUserList(Integer userId){
    User user = new User();
    user.setUserId(userId);
    User result = userDao.getUser(user);
    ContextHandler.putJson(result);
    return null;
  }

}
</pre>
<p>6. 在地址栏输入localhost/user/get?userId=1，页面能够成功显示数据源的json格式数据即可！</p>

			   <h2 id="jianjie" name="jianjie">web.xml 细节说明</h2>
			   <h3>1. 添加框架监听容器配置 (建议放在文件最顶部) <span class="am-badge am-badge-danger">必须</span></h3>
			   <pre class="am-pre-scrollable">&lt;listener&gt;<br>    &lt;listener-class&gt;org.javaosc.galaxy.web.ContextListener&lt;/listener-class&gt;<br>&lt;/listener&gt;</pre>
			   <h3> 2. 为框架装载核心配置 (紧跟上述监听配置) <span class="am-badge am-badge-danger">必须</span></h3>
			   <pre class="am-pre-scrollable">&lt;context-param&gt;<br>   &lt;param-name&gt;galaxyConfig&lt;/param-name&gt;<br>   &lt;param-value&gt;configuration.properties&lt;/param-value&gt;<br>&lt;/context-param&gt;</pre>
			   <p class="am-text-warning">说明：其中galaxyConfig命名不可改变；configuration.properties文件推荐建立在src根目录下，此文件可以自由重命名和改变所在目录，前提是文件命名和所在目录要与此配置项引用保持一致。</p>
 			   <h3> 3. 为框架装载业务扩展配置 (紧跟核心配置项) <span class="am-badge am-badge-success">可选</span></h3>
			   <pre class="am-pre-scrollable">&lt;context-param&gt;<br>   &lt;param-name>expandConfig&lt;/param-name&gt;<br>   &lt;param-value>a.properties,b.properties&lt;/param-value&gt;<br>&lt;/context-param&gt;</pre></pre>
			   <p class="am-text-warning">说明：其中expandConfig命名不可改变；a,b.properties文件推荐建立在src根目录或子目录下，支持多个扩展配置装载，此文件可以自由重命名和改变所在目录，前提是文件命名和所在目录要与此配置项引用保持一致。</p>
				  
			
		   </div>
        </div>
		<br>
      </div>
    </div>
  </div>
  <div class="am-u-md-2 am-u-md-pull-10 my-sidebar">
    <div class="am-offcanvas" id="sidebar">
      <div class="am-offcanvas-bar scrollspy-nav" data-am-scrollspynav="{offsetTop: 108}" data-am-sticky>
        <ul class="am-nav">
          <li class="am-nav-header">目录</li>
          <li><a href="#inst">简介</a></li>
          <li><a href="#ref">依赖关系</a></li>
          <li><a href="#new">启动尝鲜</a></li>
          <li><a href="#action">转发控制器</a></li>
          <li><a href="#dao">Sql模板</a></li>
          <li><a href="#service">业务逻辑服务</a></li>   
          <li><a href="#unit">单元测试</a></li>
          <li class="am-nav-header">细节深入</li>
          <li><a href="#">web.xml</a></li>
          <li><a href="#">galaxy.properties</a></li>
          <li><a href="#">注解列表</a></li>         
          <li><a href="#">最佳实践</a></li>
    	  <li><a href="#">建议回档</a></li>
        </ul>
      </div>
    </div>
  </div>
  <a href="#sidebar" class="am-btn am-btn-sm am-btn-success am-icon-bars am-show-sm-only my-button" data-am-offcanvas><span class="am-sr-only">侧栏导航</span></a>
</div>

<div class="am-modal am-modal-alert" tabindex="-1" id="community-modal">
  <div class="am-modal-dialog">
    <div class="am-modal-hd">官方社区</div>
    <div class="am-modal-bd">
       www.javaosc.com<br>
      正在开发中，敬请期待~ 谢谢！
    </div>
    <div class="am-modal-footer">
      <span class="am-modal-btn">确定</span>
    </div>
  </div>
</div>

<footer class="footer">
  <p>© 2014 <a href="http://www.javaosc.com" target="_blank">www.javaosc.com</a> Licensed under <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache License</a>. by the Javaosc Team.</p>
</footer>

<!--[if lt IE 9]>
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/modernizr.js"></script>
<script src="js/amazeui.ie8polyfill.min.js"></script>
<![endif]-->

<!--[if (gte IE 9)|!(IE)]><!-->
<script src="js/jquery.min.js"></script>
<!--<![endif]-->
<script src="js/amazeui.min.js"></script>
<script type="text/javascript">
    $.getJSON("update.json?v=11232546546",function(data){   
      var arryList = $(".plugin>li");     
      $.each(arryList, function(i,val){
           var aObject = $(val).find('span:first').find('a')
           var dl = '';
           if(i==0){
              dl = data.base.domain + $(aObject).attr('name');
           }else{
              dl = data.base.domain + 'plugin/' + $(aObject).attr('name');
           }
           $(aObject).attr('href', dl);
      });   

    });       
</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?00d07fa20b84114f166ff003315066aa";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>